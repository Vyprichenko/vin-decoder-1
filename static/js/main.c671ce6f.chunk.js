(this["webpackJsonpvin-decoder"]=this["webpackJsonpvin-decoder"]||[]).push([[0],{21:function(e,t,a){e.exports={title:"home_title__1Qtpw",searchBar:"home_searchBar__3zqNe",currentVin:"home_currentVin__-qB3_",serverError:"home_serverError__2Em27"}},25:function(e,t,a){e.exports={input:"input_input__LBr-r",invalid:"input_invalid__137A2",errorMessage:"input_errorMessage__2I-2P"}},26:function(e,t,a){e.exports={form:"search-bar_form__223Nv",rootInput:"search-bar_rootInput__uXVAv",input:"search-bar_input__3iuLp"}},30:function(e,t,a){e.exports={layout:"layout_layout__3j9jk",main:"layout_main__2oCrp"}},31:function(e,t,a){e.exports={Loader:"loader_Loader__36l00","lds-ripple":"loader_lds-ripple__2n71Z",center:"loader_center__3R44Z"}},47:function(e,t,a){e.exports={primary:"button_primary__2P7N9"}},49:function(e,t,a){e.exports=a(79)},78:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),l=a.n(c),i=a(24),s=a(7),o=a(45),u=a(14),m=a(8),d={currentVin:null,cache:[],loading:!1,serverError:null};var v=Object(s.c)({vinsSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_SEARCH_VIN_START":return Object(m.a)({},e,{loading:!0});case"WRITE_TO_CACHE":return Object(m.a)({},e,{cache:[t.vin].concat(Object(u.a)(Object(u.a)(e.cache).slice(0,4)))});case"SERVER_ERROR":return Object(m.a)({},e,{loading:!1,serverError:t.payload});case"UPDATE_VIN":return Object(m.a)({},e,{currentVin:t.currentVin,loading:!1,serverError:null});case"SET_VIN":return Object(m.a)({},e,{currentVin:t.currentVin,serverError:null});default:return e}}}),h="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):s.d,p=Object(s.e)(v,h(Object(s.a)(o.a))),E=a(12),f=a(11),b=a(29),_=a.n(b),g=a(46),V=a.n(g).a.create({baseURL:"https://vpic.nhtsa.dot.gov/api/"}),O={getVehicleVariableList:function(){return V.get("vehicles/getvehiclevariablelist?format=json").then((function(e){return S(e,y)})).catch((function(e){return e}))},getDecodeVin:function(e){return V.get("vehicles/decodevin/".concat(e,"?format=json")).then((function(e){return S(e,N)})).catch((function(e){return e}))},getVariableVin:function(e){return O.getVehicleVariableList().then((function(t){return t.results.find((function(t){return t.ID===+e}))})).catch((function(e){return e}))}},N=function(e){return""!==e.Value&&null!==e.Value},y=function(e){return""!==e.Value&&""!==e.Description&&null!==e.Value&&null!==e.Description},S=function(e,t){return{status:e.status,message:e.data.Message,results:j(e.data.Results,t)}},j=function(e,t){return Object(u.a)(e).filter(t)},C=O;function D(e){return function(t,a){var n=a().vinsSearch,r=function(e,t){return t.cache[0]&&t.cache.find((function(t){return e===t.name}))}(e,n);if(r)return t(k(r)),void t(x(r));t(function(e){return function(t){var a,n;return _.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t({type:"FETCH_SEARCH_VIN_START"}),r.prev=1,r.next=4,_.a.awrap(C.getDecodeVin(e));case 4:if(!(a=r.sent)||200!==a.status||!a.results){r.next=11;break}n=Object(m.a)({name:e},a),t(k(n)),t(I(n)),r.next=12;break;case 11:throw new Error("Sorry. There was some mistake on the server.");case 12:r.next=17;break;case 14:r.prev=14,r.t0=r.catch(1),t({type:"SERVER_ERROR",payload:r.t0.message});case 17:case"end":return r.stop()}}),null,null,[[1,14]])}}(e))}}function k(e){return{type:"WRITE_TO_CACHE",vin:e}}function I(e){return{type:"UPDATE_VIN",currentVin:e}}function x(e){return{type:"SET_VIN",currentVin:e}}var R=a(15),T=a(16),w=a(18),L=a(17),A=a(19),M=a(13),P=a.n(M),H=a(25),B=a.n(H),F=function(e){var t=[];return e.valid||t.push(B.a.invalid),r.a.createElement("div",{className:P()(e.classes.root)},r.a.createElement("input",{className:P()(t,B.a.input,e.classes.input),type:e.type,value:e.value,onChange:e.onChange,maxLength:e.maxlength,placeholder:e.placeholder}),!e.valid&&r.a.createElement("span",{className:B.a.errorMessage},e.errorMessage))};F.defaultProps={type:"text",errorMessage:"Please enter the correct value",maxlength:"",placeholder:""};var U=F,X=a(47),Z=a.n(X),q=function(e){var t=[Z.a[e.type]];return r.a.createElement("button",{onClick:e.onClick,className:P()(t,e.classes),disabled:e.isDisabled},e.children)};q.defaultProps={type:"primary",isDisabled:!1,onClick:function(){}};var J=q,Q=a(26),W=a.n(Q),z=function(e){return/[A-Z0-9]{17}/g.test(e)&&!/[QOI]/g.test(e)&&""!==e.trim()},G=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(w.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(r)))).state={input:{value:"",errorMessage:"Please enter the correct 17 characters",valid:!0}},a.onChange=function(e){var t=Object(m.a)({},a.state.input);t.value=e.target.value,t.valid=!0,a.setState({input:t})},a.onSubmit=function(e){e.preventDefault();var t=Object(m.a)({},a.state.input);z(t.value)?(t.valid=!0,a.setState({input:t}),a.props.onSubmit(e,a.state.input.value)):(t.valid=!1,a.setState({input:t}))},a}return Object(A.a)(t,e),Object(T.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isDisabled,a=e.classes,n=this.state.input;return r.a.createElement("form",{className:P.a.apply(void 0,Object(u.a)(a).concat([W.a.form])),onSubmit:this.onSubmit},r.a.createElement(U,{value:n.value,valid:n.valid,errorMessage:n.errorMessage,onChange:this.onChange,classes:{root:W.a.rootInput,input:W.a.input},placeholder:"vin number",maxlength:"17"}),r.a.createElement(J,{disabled:t},t?"Decoding...":"Decode"))}}]),t}(n.Component);G.defaultProps={classes:[],onSubmit:function(){}};var K=G,Y=function(e){var t=e.list;return r.a.createElement(r.a.Fragment,null,t&&0!==t.length&&r.a.createElement("table",{className:"table-striped"},r.a.createElement("tbody",null,t.filter((function(e){return"Error Code"!==e.Variable})).map((function(e){return r.a.createElement("tr",{key:e.VariableId},r.a.createElement("td",null,e.Variable),r.a.createElement("td",null,e.Value))})))))};Y.defaultProps={list:[]};var $=Y,ee=function(e){var t=e.vins,a=e.onClick;return r.a.createElement(r.a.Fragment,null,0!==t.length&&r.a.createElement("div",{className:"last-vins"},r.a.createElement("h4",{className:"last-vins-title"},"Last vins:"),r.a.createElement("ul",{className:"flex-box"},t.map((function(e,n){return r.a.createElement("li",{key:n,className:"flex-item-btn",onClick:function(){return a(t[n])}},e.name)})))))};ee.defaultProps={cache:[],onClick:function(){}};var te=ee,ae=a(21),ne=a.n(ae);var re=Object(i.b)((function(e){return{setVin:e.vinsSearch.setVin,currentVin:e.vinsSearch.currentVin,loading:e.vinsSearch.loading,cache:e.vinsSearch.cache,serverError:e.vinsSearch.serverError}}),(function(e){return{onSubmit:function(t,a){return e(D(a))},setVin:function(t){return e(x(t))}}}))((function(e){var t=e.onSubmit,a=e.setVin,n=e.currentVin,c=e.loading,l=e.cache,i=e.serverError;return r.a.createElement("div",null,r.a.createElement("h1",{className:ne.a.title},"VIN Decoder"),r.a.createElement(K,{onSubmit:t,isDisabled:c,classes:[ne.a.searchBar]}),r.a.createElement(te,{vins:l,onClick:a}),i?r.a.createElement("div",{className:ne.a.serverError},i):n?r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:ne.a.currentVin},"Current VIN: ",n.name),r.a.createElement("div",{className:"note"},n.message),r.a.createElement($,{list:n&&n.results})):null)})),ce=a(30),le=a.n(ce),ie=function(e){return r.a.createElement("div",{className:le.a.layout},r.a.createElement("div",{className:"container"},r.a.createElement("main",{className:le.a.main},e.children)))},se=a(31),oe=a.n(se),ue=function(e){return r.a.createElement("div",{className:oe.a.center},r.a.createElement("div",{className:oe.a.Loader},r.a.createElement("div",null),r.a.createElement("div",null)))},me=function(e){return function(t){return function(a){function n(){var e,t;Object(R.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=Object(w.a)(this,(e=Object(L.a)(n)).call.apply(e,[this].concat(r)))).state={data:null,loading:!0,error:!1},t}return Object(A.a)(n,a),Object(T.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.setState({loading:!0,error:!1}),e(this.props).then((function(e){t.setState({data:e,loading:!1})})).catch((function(){t.setState({error:!0,loading:!1})}))}},{key:"render",value:function(){var e=this.state,a=e.data,n=e.loading,c=e.error;return n?r.a.createElement(ue,null):c?r.a.createElement("div",null,"Something has gone terribly wrong"):r.a.createElement(t,Object.assign({},this.props,{data:a}))}}]),n}(n.Component)}},de=Object(s.d)(f.g,me((function(){return C.getVehicleVariableList()})))((function(e){var t=e.history,a=e.data;return r.a.createElement("ul",null,a.results.map((function(e){return r.a.createElement("li",{key:e.Name,className:"card",onClick:function(){return a=e.ID,void t.push("/variables/"+a);var a}},r.a.createElement("div",{className:"card-name"},e.Name),r.a.createElement("div",{className:"card-description",dangerouslySetInnerHTML:{__html:e.Description}}))})))})),ve=Object(s.d)(f.g,me((function(e){var t=e.match;return C.getVariableVin(t.params.id)})))((function(e){var t=e.data;return r.a.createElement(r.a.Fragment,null,t?r.a.createElement("div",{className:"card card_no-hover"},r.a.createElement("div",{className:"card-name"},t.Name),r.a.createElement("div",{className:"card-description",dangerouslySetInnerHTML:{__html:t.Description}})):r.a.createElement("div",null,"Not found"))})),he=function(){return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"container"},r.a.createElement("ul",{className:"menu"},r.a.createElement("li",null,r.a.createElement(E.b,{to:"/",exact:!0},"Home")),r.a.createElement("li",null,r.a.createElement(E.b,{to:"/variables"},"Variables")))))},pe=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(w.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(r)))).state={hasError:!1},a}return Object(A.a)(t,e),Object(T.a)(t,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("div",null,"Something has gone terribly wrong"):this.props.children}}]),t}(n.Component),Ee=function(){return r.a.createElement(pe,null,r.a.createElement(E.a,null,r.a.createElement(he,null),r.a.createElement(ie,null,r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/",exact:!0,component:re}),r.a.createElement(f.b,{path:"/variables/:id",component:ve}),r.a.createElement(f.b,{path:"/variables",component:de}),r.a.createElement(f.a,{to:"/"})))))};a(78);l.a.render(r.a.createElement(i.a,{store:p},r.a.createElement(Ee,null)),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.c671ce6f.chunk.js.map